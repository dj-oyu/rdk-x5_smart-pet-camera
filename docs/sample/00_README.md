# サンプルコード・参考資料

このディレクトリには、スマートペットカメラプロジェクトの基盤となった `vio_capture` プロジェクトのファイルへのシンボリックリンクが格納されています。

## 目的

`capture_v2.c` を中心としたカメラキャプチャの実装を参考にするため、元のプロジェクトファイルにアクセスしやすくしています。

## 構成

### メインファイル

- **capture_v2.c** - マルチカメラ対応のキャプチャプログラム（最新版）
  - このファイルをベースに新プロジェクトのカメラキャプチャモジュールを実装する
- **capture.c** - オリジナルのキャプチャプログラム（参考用）
- **Makefile** - 現在のビルド設定
- **Makefile.v2** - capture_v2用のビルド設定
- **Makefile.camera1_test** - カメラ1専用テストビルド設定

### スクリプト

- **view_v2.sh** - capture_v2の出力を表示するビューアスクリプト
- **view.sh** - オリジナルのビューアスクリプト

### ドキュメント (docs/)

- **README.md** - プロジェクト概要
- **usage.md** - 使用方法
- **testing.md** - テスト手順
- **solutions.md** - 実装した解決策
- **investigation_summary.md** - 調査サマリー

### テストコード (tests/)

- **camera_tests.c** - カメラ機能のテストコード
- **camera_test_tools.sh** - テスト補助スクリプト
- **probe_modes.sh** - カメラモード調査スクリプト
- **run_all_tests.sh** - 全テスト実行スクリプト
- **mipi_host_filter.c** - MIPIホストフィルタテスト

### その他

- **gitignore_reference** - 元プロジェクトの.gitignore（参考用）

## 活用方法

### 1. capture_v2.c の理解

新プロジェクトでは `capture_v2.c` をベースに、以下の機能を拡張します：

- V4L2によるカメラキャプチャ
- マルチカメラ対応
- フレームバッファ管理
- プロセス間通信（ZeroMQ経由でPythonへフレーム送信）

### 2. Makefileの参考

ビルド設定を参考に、新プロジェクトのMakefileを作成します。

### 3. テストコードの再利用

カメラ機能のテストコードを新プロジェクトに適用できます。

### 4. ドキュメントの知見

V4L2やカメラ設定に関する調査結果を活用します。

## 元プロジェクトとの関係

| 元プロジェクト | 新プロジェクト |
|---------------|---------------|
| `/app/cdev_demo/vio_capture/` | `/app/smart-pet-camera/` |
| capture_v2.c | src/capture/camera_manager.c |
| 単一目的（キャプチャのみ） | 統合システム（キャプチャ+AI+記録） |
| C言語のみ | C（キャプチャ）+ Python（AI・記録） |

## 注意事項

- このディレクトリ内のファイルはすべてシンボリックリンクです
- 実際のファイルは `/app/cdev_demo/vio_capture/` にあります
- 変更する場合は、元ファイルに影響があることに注意してください
- 新プロジェクトでは、これらを参考にしつつ新しいコードを書くことを推奨します

## リンク作成日

2025-12-19

---

**このディレクトリは参考資料として保持され、新プロジェクトの実装時に参照されます。**
